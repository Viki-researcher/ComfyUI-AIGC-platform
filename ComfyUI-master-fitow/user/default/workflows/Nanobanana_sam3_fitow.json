{"id":"f9409445-d8ba-480d-9215-14acea00df30","revision":0,"last_node_id":22,"last_link_id":17,"nodes":[{"id":9,"type":"LoadImage","pos":[1896.5595133967315,990.2617206788948],"size":[249.81067055822223,314],"flags":{},"order":0,"mode":4,"inputs":[{"localized_name":"图像","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"选择文件上传","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"图像","name":"IMAGE","type":"IMAGE","links":[2]},{"localized_name":"遮罩","name":"MASK","type":"MASK","links":[]}],"properties":{"Node name for S&R":"LoadImage","cnr_id":"comfy-core","ver":"0.9.1"},"widgets_values":["20251216095450798_2SZG_0_3_temp.png","image"]},{"id":6,"type":"LoadImage","pos":[2167.4120734101703,984.8865987551975],"size":[270,314.0000000000001],"flags":{},"order":1,"mode":4,"inputs":[{"localized_name":"图像","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"选择文件上传","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"图像","name":"IMAGE","type":"IMAGE","links":[1]},{"localized_name":"遮罩","name":"MASK","type":"MASK","links":[]}],"properties":{"Node name for S&R":"LoadImage","cnr_id":"comfy-core","ver":"0.9.1"},"widgets_values":["20260111154602327_2SZG_0_2.png","image"]},{"id":7,"type":"ImageScaleBy","pos":[2170.011712733059,1331.9706110319669],"size":[270,82],"flags":{},"order":5,"mode":4,"inputs":[{"localized_name":"图像","name":"image","type":"IMAGE","link":1},{"localized_name":"缩放算法","name":"upscale_method","type":"COMBO","widget":{"name":"upscale_method"},"link":null},{"localized_name":"缩放系数","name":"scale_by","type":"FLOAT","widget":{"name":"scale_by"},"link":null}],"outputs":[{"localized_name":"图像","name":"IMAGE","type":"IMAGE","links":[]}],"properties":{"Node name for S&R":"ImageScaleBy"},"widgets_values":["nearest-exact",0.7]},{"id":8,"type":"ImageScaleBy","pos":[1880.280598649243,1322.9247393450187],"size":[270,82],"flags":{},"order":4,"mode":4,"inputs":[{"localized_name":"图像","name":"image","type":"IMAGE","link":2},{"localized_name":"缩放算法","name":"upscale_method","type":"COMBO","widget":{"name":"upscale_method"},"link":null},{"localized_name":"缩放系数","name":"scale_by","type":"FLOAT","widget":{"name":"scale_by"},"link":null}],"outputs":[{"localized_name":"图像","name":"IMAGE","type":"IMAGE","links":[]}],"properties":{"Node name for S&R":"ImageScaleBy"},"widgets_values":["nearest-exact",0.7]},{"id":18,"type":"LoadImage","pos":[1964.811401173834,1390.3937611987963],"size":[270,314.00000000000006],"flags":{},"order":2,"mode":0,"inputs":[{"localized_name":"图像","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"选择文件上传","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"图像","name":"IMAGE","type":"IMAGE","links":[11]},{"localized_name":"遮罩","name":"MASK","type":"MASK","links":[]}],"properties":{"Node name for S&R":"LoadImage","cnr_id":"comfy-core","ver":"0.9.1"},"widgets_values":["LFRing_2.jpg","image"]},{"id":10,"type":"PreviewImage","pos":[2661.7752814015034,910.6989385703739],"size":[211.50900103214053,246.0000000000001],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"图像","name":"images","type":"IMAGE","link":5}],"outputs":[],"properties":{"Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":19,"type":"ImageScaleBy","pos":[2262.87140499161,1515.6935827916634],"size":[270,82],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"图像","name":"image","type":"IMAGE","link":11},{"localized_name":"缩放算法","name":"upscale_method","type":"COMBO","widget":{"name":"upscale_method"},"link":null},{"localized_name":"缩放系数","name":"scale_by","type":"FLOAT","widget":{"name":"scale_by"},"link":null}],"outputs":[{"localized_name":"图像","name":"IMAGE","type":"IMAGE","links":[12]}],"properties":{"Node name for S&R":"ImageScaleBy"},"widgets_values":["nearest-exact",0.5]},{"id":5,"type":"ComfyUI_Gemini_Parallel_MultiImage","pos":[2546.1501302187344,1234.7835290805651],"size":[430.335546875,420],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"image1","name":"image1","shape":7,"type":"IMAGE","link":12},{"localized_name":"image2","name":"image2","shape":7,"type":"IMAGE","link":null},{"localized_name":"image3","name":"image3","shape":7,"type":"IMAGE","link":null},{"localized_name":"image4","name":"image4","shape":7,"type":"IMAGE","link":null},{"localized_name":"image5","name":"image5","shape":7,"type":"IMAGE","link":null},{"localized_name":"image6","name":"image6","shape":7,"type":"IMAGE","link":null},{"localized_name":"image7","name":"image7","shape":7,"type":"IMAGE","link":null},{"localized_name":"image8","name":"image8","shape":7,"type":"IMAGE","link":null},{"localized_name":"prompt","name":"prompt","type":"STRING","widget":{"name":"prompt"},"link":null},{"localized_name":"api_key","name":"api_key","type":"STRING","widget":{"name":"api_key"},"link":null},{"localized_name":"model","name":"model","type":"COMBO","widget":{"name":"model"},"link":null},{"localized_name":"mode","name":"mode","type":"COMBO","widget":{"name":"mode"},"link":null},{"localized_name":"aspect_ratio","name":"aspect_ratio","type":"COMBO","widget":{"name":"aspect_ratio"},"link":null},{"localized_name":"image_size","name":"image_size","type":"COMBO","widget":{"name":"image_size"},"link":null},{"localized_name":"generation_count","name":"generation_count","type":"INT","widget":{"name":"generation_count"},"link":null},{"localized_name":"seed","name":"seed","shape":7,"type":"INT","widget":{"name":"seed"},"link":null}],"outputs":[{"localized_name":"images","name":"images","type":"IMAGE","links":[5,13,15,17]},{"localized_name":"responses","name":"responses","type":"STRING","links":null}],"properties":{"Node name for S&R":"ComfyUI_Gemini_Parallel_MultiImage"},"widgets_values":["图中皮质区域生成大量细小划伤缺陷","sk-vXRtGmjPPgBYii1R0ONTEvcMA6ho4ZPzjFJENidc05yzCnuQ","gemini-3-pro-image-preview","img2img","Auto","1K",1,1867,"randomize"]},{"id":16,"type":"PreviewImage","pos":[3934.182027583963,1191.651969002772],"size":[479.07728440393316,564.6992577270421],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"图像","name":"images","type":"IMAGE","link":9}],"outputs":[],"properties":{"Node name for S&R":"PreviewImage","cnr_id":"comfy-core","ver":"0.3.72"},"widgets_values":[]},{"id":21,"type":"SAM3BBoxCollector","pos":[3041.572769474197,976.2925393317599],"size":[395.24103338023133,346.75010617617],"flags":{},"order":10,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":15},{"localized_name":"bboxes","name":"bboxes","type":"STRING","widget":{"name":"bboxes"},"link":null},{"localized_name":"neg_bboxes","name":"neg_bboxes","type":"STRING","widget":{"name":"neg_bboxes"},"link":null}],"outputs":[{"localized_name":"positive_bboxes","name":"positive_bboxes","type":"SAM3_BOXES_PROMPT","links":[16]},{"localized_name":"negative_bboxes","name":"negative_bboxes","type":"SAM3_BOXES_PROMPT","links":[]}],"properties":{"Node name for S&R":"SAM3BBoxCollector"},"widgets_values":["[{\"x1\":796.5457356825565,\"y1\":383.5122890435846,\"x2\":920.8400325480436,\"y2\":574.2117578661135}]","[]",""]},{"id":20,"type":"SAM3PointCollector","pos":[3045.707340912357,1375.149019579179],"size":[400,358],"flags":{},"order":9,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":13},{"localized_name":"points_store","name":"points_store","type":"STRING","widget":{"name":"points_store"},"link":null},{"localized_name":"coordinates","name":"coordinates","type":"STRING","widget":{"name":"coordinates"},"link":null},{"localized_name":"neg_coordinates","name":"neg_coordinates","type":"STRING","widget":{"name":"neg_coordinates"},"link":null}],"outputs":[{"localized_name":"positive_points","name":"positive_points","type":"SAM3_POINTS_PROMPT","links":[14]},{"localized_name":"negative_points","name":"negative_points","type":"SAM3_POINTS_PROMPT","links":null}],"properties":{"Node name for S&R":"SAM3PointCollector","cnr_id":"comfyui-sam3","ver":"82c8e4f88a6c0a9242712b827e05f5e67c4a90a7"},"widgets_values":["{\"positive\":[{\"x\":726.313739687914,\"y\":441.75930259677614}],\"negative\":[]}","[{\"x\":726.313739687914,\"y\":441.75930259677614}]","[]",""]},{"id":14,"type":"SAM3UnifiedPromptSegmentation","pos":[3543.9930595946253,1200.9830893913866],"size":[338.3990234375,314],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"sam3_model","name":"sam3_model","type":"SAM3_MODEL","link":7},{"localized_name":"image","name":"image","type":"IMAGE","link":17},{"localized_name":"positive_boxes","name":"positive_boxes","shape":7,"type":"SAM3_BOXES_PROMPT","link":16},{"localized_name":"negative_boxes","name":"negative_boxes","shape":7,"type":"SAM3_BOXES_PROMPT","link":null},{"localized_name":"boxes_prompt","name":"boxes_prompt","shape":7,"type":"SAM3_BOXES_PROMPT","link":null},{"localized_name":"points_prompt","name":"points_prompt","shape":7,"type":"SAM3_POINTS_PROMPT","link":null},{"localized_name":"positive_points","name":"positive_points","shape":7,"type":"SAM3_POINTS_PROMPT","link":14},{"localized_name":"negative_points","name":"negative_points","shape":7,"type":"SAM3_POINTS_PROMPT","link":null},{"localized_name":"mask_prompt","name":"mask_prompt","shape":7,"type":"MASK","link":null},{"localized_name":"text_prompt","name":"text_prompt","shape":7,"type":"STRING","widget":{"name":"text_prompt"},"link":null},{"localized_name":"use_points_as_post_filter","name":"use_points_as_post_filter","shape":7,"type":"BOOLEAN","widget":{"name":"use_points_as_post_filter"},"link":null},{"localized_name":"confidence_threshold","name":"confidence_threshold","shape":7,"type":"FLOAT","widget":{"name":"confidence_threshold"},"link":null},{"localized_name":"max_detections","name":"max_detections","shape":7,"type":"INT","widget":{"name":"max_detections"},"link":null},{"localized_name":"offload_model","name":"offload_model","shape":7,"type":"BOOLEAN","widget":{"name":"offload_model"},"link":null}],"outputs":[{"localized_name":"masks","name":"masks","type":"MASK","links":[]},{"localized_name":"visualization","name":"visualization","type":"IMAGE","links":[9]},{"localized_name":"boxes","name":"boxes","type":"STRING","links":null},{"localized_name":"scores","name":"scores","type":"STRING","links":null}],"properties":{"Node name for S&R":"SAM3UnifiedPromptSegmentation"},"widgets_values":["",false,0,false,false]},{"id":15,"type":"LoadSAM3Model","pos":[3550.8267176227027,1080.6326033581856],"size":[270,82],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"model_path","name":"model_path","type":"STRING","widget":{"name":"model_path"},"link":null}],"outputs":[{"localized_name":"sam3_model","name":"sam3_model","type":"SAM3_MODEL","links":[7]}],"properties":{"Node name for S&R":"LoadSAM3Model","cnr_id":"comfyui-sam3","ver":"82c8e4f88a6c0a9242712b827e05f5e67c4a90a7"},"widgets_values":["models/sam3/sam3.pt"]}],"links":[[1,6,0,7,0,"IMAGE"],[2,9,0,8,0,"IMAGE"],[5,5,0,10,0,"IMAGE"],[7,15,0,14,0,"SAM3_MODEL"],[9,14,1,16,0,"IMAGE"],[11,18,0,19,0,"IMAGE"],[12,19,0,5,0,"IMAGE"],[13,5,0,20,0,"IMAGE"],[14,20,0,14,6,"SAM3_POINTS_PROMPT"],[15,5,0,21,0,"IMAGE"],[16,21,0,14,2,"SAM3_BOXES_PROMPT"],[17,5,0,14,1,"IMAGE"]],"groups":[],"config":{},"extra":{"workflowRendererVersion":"LG","ds":{"scale":1.015255979947733,"offset":[-2658.0625646211633,-906.4603553376305]}},"version":0.4}