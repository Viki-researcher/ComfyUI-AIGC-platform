{"id":"84d49cdf-e97e-4a9c-a3e3-d62063bf4058","revision":0,"last_node_id":25,"last_link_id":28,"nodes":[{"id":4,"type":"MaskPreview","pos":[1963.9463122188467,512.4536718630645],"size":[210,258],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"遮罩","name":"mask","type":"MASK","link":4}],"outputs":[],"properties":{"Node name for S&R":"MaskPreview","cnr_id":"comfy-core","ver":"0.3.72"},"widgets_values":[]},{"id":9,"type":"SAM3PointCollector","pos":[591.7989275587069,1088.7279035462395],"size":[400,266],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":11},{"localized_name":"points_store","name":"points_store","type":"STRING","widget":{"name":"points_store"},"link":null},{"localized_name":"coordinates","name":"coordinates","type":"STRING","widget":{"name":"coordinates"},"link":null},{"localized_name":"neg_coordinates","name":"neg_coordinates","type":"STRING","widget":{"name":"neg_coordinates"},"link":null}],"outputs":[{"localized_name":"positive_points","name":"positive_points","type":"SAM3_POINTS_PROMPT","links":[]},{"localized_name":"negative_points","name":"negative_points","type":"SAM3_POINTS_PROMPT","links":[12]}],"properties":{"Node name for S&R":"SAM3PointCollector","cnr_id":"comfyui-sam3","ver":"82c8e4f88a6c0a9242712b827e05f5e67c4a90a7"},"widgets_values":["{\"positive\":[],\"negative\":[]}","[]","[]",""]},{"id":1,"type":"LoadSAM3Model","pos":[266.98438813855796,562.4272015862747],"size":[270,82],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"model_path","name":"model_path","type":"STRING","widget":{"name":"model_path"},"link":null}],"outputs":[{"localized_name":"sam3_model","name":"sam3_model","type":"SAM3_MODEL","links":[1,24]}],"properties":{"Node name for S&R":"LoadSAM3Model","cnr_id":"comfyui-sam3","ver":"82c8e4f88a6c0a9242712b827e05f5e67c4a90a7"},"widgets_values":["models/sam3/sam3.pt"]},{"id":13,"type":"SAM3PointCollector","pos":[588.9806135795113,1474.129776379313],"size":[400,266],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":15},{"localized_name":"points_store","name":"points_store","type":"STRING","widget":{"name":"points_store"},"link":null},{"localized_name":"coordinates","name":"coordinates","type":"STRING","widget":{"name":"coordinates"},"link":null},{"localized_name":"neg_coordinates","name":"neg_coordinates","type":"STRING","widget":{"name":"neg_coordinates"},"link":null}],"outputs":[{"localized_name":"positive_points","name":"positive_points","type":"SAM3_POINTS_PROMPT","links":[16]},{"localized_name":"negative_points","name":"negative_points","type":"SAM3_POINTS_PROMPT","links":[]}],"properties":{"Node name for S&R":"SAM3PointCollector","cnr_id":"comfyui-sam3","ver":"82c8e4f88a6c0a9242712b827e05f5e67c4a90a7"},"widgets_values":["{\"positive\":[],\"negative\":[]}","[]","[]",""]},{"id":8,"type":"LoadImage","pos":[247.26473468122896,726.1074200292989],"size":[274.080078125,314],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"图像","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"选择文件上传","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"图像","name":"IMAGE","type":"IMAGE","links":[9,10,11,14,15,17,20,25,27]},{"localized_name":"遮罩","name":"MASK","type":"MASK","links":null}],"properties":{"Node name for S&R":"LoadImage","cnr_id":"comfy-core","ver":"0.3.72"},"widgets_values":["20260111154602327_2SZG_0_2.png","image"]},{"id":3,"type":"PreviewImage","pos":[1781.9947026024947,806.7943601482968],"size":[479.07728440393316,564.6992577270421],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"图像","name":"images","type":"IMAGE","link":3}],"outputs":[],"properties":{"Node name for S&R":"PreviewImage","cnr_id":"comfy-core","ver":"0.3.72"},"widgets_values":[]},{"id":6,"type":"SAM3PointCollector","pos":[595.5651596595137,776.7236724425832],"size":[400,266],"flags":{},"order":2,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":10},{"localized_name":"points_store","name":"points_store","type":"STRING","widget":{"name":"points_store"},"link":null},{"localized_name":"coordinates","name":"coordinates","type":"STRING","widget":{"name":"coordinates"},"link":null},{"localized_name":"neg_coordinates","name":"neg_coordinates","type":"STRING","widget":{"name":"neg_coordinates"},"link":null}],"outputs":[{"localized_name":"positive_points","name":"positive_points","type":"SAM3_POINTS_PROMPT","links":[8]},{"localized_name":"negative_points","name":"negative_points","type":"SAM3_POINTS_PROMPT","links":null}],"properties":{"Node name for S&R":"SAM3PointCollector","cnr_id":"comfyui-sam3","ver":"82c8e4f88a6c0a9242712b827e05f5e67c4a90a7"},"widgets_values":["{\"positive\":[],\"negative\":[]}","[]","[]",""]},{"id":16,"type":"SAM3BBoxCollector","pos":[1394.6761251562666,979.7054356285878],"size":[321.340098864644,384.2970263986399],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":17},{"localized_name":"bboxes","name":"bboxes","type":"STRING","widget":{"name":"bboxes"},"link":null},{"localized_name":"neg_bboxes","name":"neg_bboxes","type":"STRING","widget":{"name":"neg_bboxes"},"link":null}],"outputs":[{"localized_name":"positive_bboxes","name":"positive_bboxes","type":"SAM3_BOXES_PROMPT","links":[]},{"localized_name":"negative_bboxes","name":"negative_bboxes","type":"SAM3_BOXES_PROMPT","links":[19]}],"properties":{"Node name for S&R":"SAM3BBoxCollector"},"widgets_values":["[]","[]",""]},{"id":10,"type":"SAM3BBoxCollector","pos":[1025.6433425755056,967.3280520297351],"size":[338.3829952931287,359.38806944161206],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":14},{"localized_name":"bboxes","name":"bboxes","type":"STRING","widget":{"name":"bboxes"},"link":null},{"localized_name":"neg_bboxes","name":"neg_bboxes","type":"STRING","widget":{"name":"neg_bboxes"},"link":null}],"outputs":[{"localized_name":"positive_bboxes","name":"positive_bboxes","type":"SAM3_BOXES_PROMPT","links":[18]},{"localized_name":"negative_bboxes","name":"negative_bboxes","type":"SAM3_BOXES_PROMPT","links":null}],"properties":{"Node name for S&R":"SAM3BBoxCollector"},"widgets_values":["[]","[]",""]},{"id":22,"type":"SAM3PointCollector","pos":[-538.2922895387852,797.1389957489633],"size":[400,266],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":27},{"localized_name":"points_store","name":"points_store","type":"STRING","widget":{"name":"points_store"},"link":null},{"localized_name":"coordinates","name":"coordinates","type":"STRING","widget":{"name":"coordinates"},"link":null},{"localized_name":"neg_coordinates","name":"neg_coordinates","type":"STRING","widget":{"name":"neg_coordinates"},"link":null}],"outputs":[{"localized_name":"positive_points","name":"positive_points","type":"SAM3_POINTS_PROMPT","links":[26]},{"localized_name":"negative_points","name":"negative_points","type":"SAM3_POINTS_PROMPT","links":null}],"properties":{"Node name for S&R":"SAM3PointCollector","cnr_id":"comfyui-sam3","ver":"82c8e4f88a6c0a9242712b827e05f5e67c4a90a7"},"widgets_values":["{\"positive\":[{\"x\":423.4735247734739,\"y\":404.9016773884026},{\"x\":757.562554240028,\"y\":409.016783844942}],\"negative\":[]}","[{\"x\":423.4735247734739,\"y\":404.9016773884026},{\"x\":757.562554240028,\"y\":409.016783844942}]","[]",""]},{"id":23,"type":"PreviewImage","pos":[-1033.6907629505217,561.8120792722301],"size":[479.07728440393316,564.6992577270421],"flags":{},"order":13,"mode":0,"inputs":[{"localized_name":"图像","name":"images","type":"IMAGE","link":28}],"outputs":[],"properties":{"Node name for S&R":"PreviewImage","cnr_id":"comfy-core","ver":"0.3.72"},"widgets_values":[]},{"id":21,"type":"SAM3Segmentation","pos":[-107.82281809283754,579.0837872634693],"size":[283.56640625,210],"flags":{},"order":10,"mode":4,"inputs":[{"localized_name":"sam3_model","name":"sam3_model","type":"SAM3_MODEL","link":24},{"localized_name":"image","name":"image","type":"IMAGE","link":25},{"localized_name":"positive_points","name":"positive_points","shape":7,"type":"SAM3_POINTS_PROMPT","link":26},{"localized_name":"negative_points","name":"negative_points","shape":7,"type":"SAM3_POINTS_PROMPT","link":null},{"localized_name":"box","name":"box","shape":7,"type":"SAM3_BOXES_PROMPT","link":null},{"localized_name":"refinement_iterations","name":"refinement_iterations","shape":7,"type":"INT","widget":{"name":"refinement_iterations"},"link":null},{"localized_name":"use_multimask","name":"use_multimask","shape":7,"type":"BOOLEAN","widget":{"name":"use_multimask"},"link":null},{"localized_name":"output_best_mask","name":"output_best_mask","shape":7,"type":"BOOLEAN","widget":{"name":"output_best_mask"},"link":null},{"localized_name":"offload_model","name":"offload_model","shape":7,"type":"BOOLEAN","widget":{"name":"offload_model"},"link":null}],"outputs":[{"localized_name":"mask","name":"mask","type":"MASK","links":null},{"localized_name":"mask_logits","name":"mask_logits","type":"MASK","links":null},{"localized_name":"visualization","name":"visualization","type":"IMAGE","links":[28]},{"localized_name":"boxes","name":"boxes","type":"STRING","links":null},{"localized_name":"scores","name":"scores","type":"STRING","links":null}],"properties":{"Node name for S&R":"SAM3Segmentation"},"widgets_values":[0,true,true,false]},{"id":17,"type":"SAM3BBoxCollector","pos":[1113.8627229900771,1404.6051144312987],"size":[400,480],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":20},{"localized_name":"bboxes","name":"bboxes","type":"STRING","widget":{"name":"bboxes"},"link":null},{"localized_name":"neg_bboxes","name":"neg_bboxes","type":"STRING","widget":{"name":"neg_bboxes"},"link":null}],"outputs":[{"localized_name":"positive_bboxes","name":"positive_bboxes","type":"SAM3_BOXES_PROMPT","links":[21]},{"localized_name":"negative_bboxes","name":"negative_bboxes","type":"SAM3_BOXES_PROMPT","links":[]}],"properties":{"Node name for S&R":"SAM3BBoxCollector"},"widgets_values":["[]","[]",""]},{"id":5,"type":"SAM3UnifiedPromptSegmentation","pos":[1362.906358105636,578.8250438553002],"size":[338.3990234375,314],"flags":{},"order":9,"mode":0,"inputs":[{"localized_name":"sam3_model","name":"sam3_model","type":"SAM3_MODEL","link":1},{"localized_name":"image","name":"image","type":"IMAGE","link":9},{"localized_name":"positive_boxes","name":"positive_boxes","shape":7,"type":"SAM3_BOXES_PROMPT","link":18},{"localized_name":"negative_boxes","name":"negative_boxes","shape":7,"type":"SAM3_BOXES_PROMPT","link":19},{"localized_name":"boxes_prompt","name":"boxes_prompt","shape":7,"type":"SAM3_BOXES_PROMPT","link":21},{"localized_name":"points_prompt","name":"points_prompt","shape":7,"type":"SAM3_POINTS_PROMPT","link":16},{"localized_name":"positive_points","name":"positive_points","shape":7,"type":"SAM3_POINTS_PROMPT","link":8},{"localized_name":"negative_points","name":"negative_points","shape":7,"type":"SAM3_POINTS_PROMPT","link":12},{"localized_name":"mask_prompt","name":"mask_prompt","shape":7,"type":"MASK","link":null},{"localized_name":"text_prompt","name":"text_prompt","shape":7,"type":"STRING","widget":{"name":"text_prompt"},"link":null},{"localized_name":"use_points_as_post_filter","name":"use_points_as_post_filter","shape":7,"type":"BOOLEAN","widget":{"name":"use_points_as_post_filter"},"link":null},{"localized_name":"confidence_threshold","name":"confidence_threshold","shape":7,"type":"FLOAT","widget":{"name":"confidence_threshold"},"link":null},{"localized_name":"max_detections","name":"max_detections","shape":7,"type":"INT","widget":{"name":"max_detections"},"link":null},{"localized_name":"offload_model","name":"offload_model","shape":7,"type":"BOOLEAN","widget":{"name":"offload_model"},"link":null}],"outputs":[{"localized_name":"masks","name":"masks","type":"MASK","links":[4]},{"localized_name":"visualization","name":"visualization","type":"IMAGE","links":[3]},{"localized_name":"boxes","name":"boxes","type":"STRING","links":null},{"localized_name":"scores","name":"scores","type":"STRING","links":null}],"properties":{"Node name for S&R":"SAM3UnifiedPromptSegmentation"},"widgets_values":["defect",false,0.25,false,false]}],"links":[[1,1,0,5,0,"SAM3_MODEL"],[3,5,1,3,0,"IMAGE"],[4,5,0,4,0,"MASK"],[8,6,0,5,6,"SAM3_POINTS_PROMPT"],[9,8,0,5,1,"IMAGE"],[10,8,0,6,0,"IMAGE"],[11,8,0,9,0,"IMAGE"],[12,9,1,5,7,"SAM3_POINTS_PROMPT"],[14,8,0,10,0,"IMAGE"],[15,8,0,13,0,"IMAGE"],[16,13,0,5,5,"SAM3_POINTS_PROMPT"],[17,8,0,16,0,"IMAGE"],[18,10,0,5,2,"SAM3_BOXES_PROMPT"],[19,16,1,5,3,"SAM3_BOXES_PROMPT"],[20,8,0,17,0,"IMAGE"],[21,17,0,5,4,"SAM3_BOXES_PROMPT"],[24,1,0,21,0,"SAM3_MODEL"],[25,8,0,21,1,"IMAGE"],[26,22,0,21,2,"SAM3_POINTS_PROMPT"],[27,8,0,22,0,"IMAGE"],[28,21,2,23,0,"IMAGE"]],"groups":[],"config":{},"extra":{"workflowRendererVersion":"LG","ds":{"scale":1.1167815779425014,"offset":[-880.0111484703175,-498.9745601866738]}},"version":0.4}