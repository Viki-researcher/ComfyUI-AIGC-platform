# Art Bot èŠå¤©çª—å£åŠŸèƒ½è¯´æ˜æ–‡æ¡£

## 1. åŠŸèƒ½æ¦‚è¿°

**Art Bot** æ˜¯è²ç‰¹æ•°æ®ç”Ÿæˆå¹³å°ï¼ˆArt Design Proï¼‰ä¸­å†…ç½®çš„ä¸€ä¸ª**å‰ç«¯ UI æ¼”ç¤ºå‹èŠå¤©çª—å£ç»„ä»¶**ã€‚å®ƒä½äºç³»ç»Ÿé¡¶éƒ¨å¯¼èˆªæ å³ä¾§ï¼Œé€šè¿‡ç‚¹å‡»æ¶ˆæ¯å›¾æ ‡ï¼ˆğŸ’¬ï¼‰å³å¯æ‰“å¼€ã€‚

> **é‡è¦è¯´æ˜ï¼šå½“å‰ç‰ˆæœ¬çš„ Art Bot å¹¶æœªæ¥å…¥ä»»ä½•å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰æˆ– AI åç«¯æœåŠ¡ã€‚** å®ƒæ˜¯ Art Design Pro å¼€æºæ¨¡æ¿æ¡†æ¶è‡ªå¸¦çš„ UI æ¼”ç¤ºç»„ä»¶ï¼Œæ‰€æœ‰å¯¹è¯å†…å®¹å‡ä¸ºå‰ç«¯ç¡¬ç¼–ç çš„ Mock æ•°æ®ï¼Œç”¨æˆ·å‘é€çš„æ¶ˆæ¯ä¸ä¼šè¢«ä¼ é€åˆ°ä»»ä½•åç«¯ API æˆ– AI æ¨¡å‹è¿›è¡Œå¤„ç†ã€‚

## 2. åŠŸèƒ½ç°çŠ¶

### 2.1 å½“å‰èƒ½åŠ›

| èƒ½åŠ› | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| èŠå¤©çª—å£ UI | âœ… å·²å®ç° | å®Œæ•´çš„èŠå¤©å¯¹è¯ç•Œé¢ï¼Œæ”¯æŒæ¶ˆæ¯æ°”æ³¡ã€å¤´åƒã€æ—¶é—´æˆ³æ˜¾ç¤º |
| æ¶ˆæ¯å‘é€ | âœ… å·²å®ç° | ç”¨æˆ·å¯ä»¥è¾“å…¥å¹¶å‘é€æ¶ˆæ¯ï¼ˆä»…è¿½åŠ åˆ°æœ¬åœ°åˆ—è¡¨ï¼‰ |
| é¢„ç½®å¯¹è¯å±•ç¤º | âœ… å·²å®ç° | æ˜¾ç¤º 9 æ¡é¢„è®¾çš„æ¼”ç¤ºå¯¹è¯ |
| åœ¨çº¿çŠ¶æ€æŒ‡ç¤º | âœ… å·²å®ç° | æ˜¾ç¤ºç»¿è‰²"åœ¨çº¿"å‘¼å¸ç¯åŠ¨ç”» |
| å“åº”å¼å¸ƒå±€ | âœ… å·²å®ç° | ç§»åŠ¨ç«¯å…¨å±æŠ½å±‰ï¼Œæ¡Œé¢ç«¯ 480px ä¾§è¾¹æ  |
| AI æ¨¡å‹å¯¹æ¥ | âŒ æœªå®ç° | æœªé›†æˆä»»ä½• LLM API |
| æ¶ˆæ¯å›å¤ | âŒ æœªå®ç° | Bot ä¸ä¼šè‡ªåŠ¨å›å¤ç”¨æˆ·å‘é€çš„æ–°æ¶ˆæ¯ |
| æ¶ˆæ¯æŒä¹…åŒ– | âŒ æœªå®ç° | åˆ·æ–°é¡µé¢åæ¶ˆæ¯é‡ç½®ä¸ºé¢„è®¾æ•°æ® |
| åç«¯ API | âŒ æœªå®ç° | æ— å¯¹åº”çš„åç«¯èŠå¤©æ¥å£ |

### 2.2 ç”¨æˆ·ä½“éªŒæµç¨‹

```
ç”¨æˆ·ç‚¹å‡»é¡¶æ èŠå¤©å›¾æ ‡ â†’ ä¾§è¾¹æŠ½å±‰æ‰“å¼€ â†’ å±•ç¤ºé¢„ç½® Mock å¯¹è¯
     â†“
ç”¨æˆ·è¾“å…¥æ¶ˆæ¯å¹¶å‘é€ â†’ æ¶ˆæ¯è¿½åŠ åˆ°æœ¬åœ°åˆ—è¡¨ â†’ Bot æ— å“åº” â†’ ç»“æŸ
```

## 3. æŠ€æœ¯æ¶æ„

### 3.1 ç»„ä»¶å±‚æ¬¡

```
ArtHeaderBar (é¡¶éƒ¨å¯¼èˆªæ )
  â””â”€ èŠå¤©æŒ‰é’® (icon: ri:message-3-line)
       â”‚  ç‚¹å‡»è§¦å‘ mittBus.emit('openChat')
       â–¼
ArtChatWindow (å…¨å±€å¼‚æ­¥ç»„ä»¶)
  â””â”€ ElDrawer (Element Plus æŠ½å±‰)
       â”œâ”€ èŠå¤©å¤´éƒ¨ï¼ˆBot åç§° + åœ¨çº¿çŠ¶æ€ï¼‰
       â”œâ”€ æ¶ˆæ¯åˆ—è¡¨åŒºåŸŸï¼ˆå¯æ»šåŠ¨ï¼‰
       â”‚    â”œâ”€ Bot æ¶ˆæ¯æ°”æ³¡ï¼ˆå·¦ä¾§ï¼Œç°è‰²èƒŒæ™¯ï¼‰
       â”‚    â””â”€ ç”¨æˆ·æ¶ˆæ¯æ°”æ³¡ï¼ˆå³ä¾§ï¼Œä¸»é¢˜è‰²èƒŒæ™¯ï¼‰
       â””â”€ è¾“å…¥åŒºåŸŸ
            â”œâ”€ å¤šè¡Œæ–‡æœ¬æ¡†ï¼ˆæ”¯æŒ Enter å‘é€ï¼‰
            â”œâ”€ é™„ä»¶æŒ‰é’®ï¼ˆUI å ä½ï¼Œæ— åŠŸèƒ½ï¼‰
            â”œâ”€ å›¾ç‰‡æŒ‰é’®ï¼ˆUI å ä½ï¼Œæ— åŠŸèƒ½ï¼‰
            â””â”€ å‘é€æŒ‰é’®
```

### 3.2 ç›¸å…³æºç æ–‡ä»¶

| æ–‡ä»¶è·¯å¾„ | ä½œç”¨ |
|---------|------|
| `art-design-pro/src/components/core/layouts/art-chat-window/index.vue` | **æ ¸å¿ƒç»„ä»¶**ï¼šèŠå¤©çª—å£ä¸»ä½“ |
| `art-design-pro/src/components/core/layouts/art-header-bar/index.vue` | é¡¶æ ï¼šåŒ…å«èŠå¤©æŒ‰é’® |
| `art-design-pro/src/config/modules/headerBar.ts` | é…ç½®ï¼šæ§åˆ¶èŠå¤©æŒ‰é’®æ˜¯å¦æ˜¾ç¤º |
| `art-design-pro/src/config/modules/component.ts` | é…ç½®ï¼šå…¨å±€ç»„ä»¶æ³¨å†Œï¼ˆå« chat-windowï¼‰ |
| `art-design-pro/src/hooks/core/useHeaderBar.ts` | Hookï¼š`shouldShowChat` è®¡ç®—å±æ€§ |
| `art-design-pro/src/utils/sys/mittBus.ts` | äº‹ä»¶æ€»çº¿ï¼š`openChat` äº‹ä»¶å®šä¹‰ |
| `art-design-pro/src/views/template/chat/index.vue` | æ¨¡æ¿é¡µé¢ï¼šç‹¬ç«‹çš„èŠå¤©é¡µé¢æ¨¡æ¿ï¼ˆåŒæ ·æ˜¯ Mock æ•°æ®ï¼‰ |
| `art-design-pro/src/views/examples/socket-chat/index.vue` | ç¤ºä¾‹é¡µé¢ï¼šWebSocket è¿æ¥æ¼”ç¤ºï¼ˆé AI å¯¹è¯ï¼‰ |

### 3.3 äº‹ä»¶é€šä¿¡æœºåˆ¶

```typescript
// 1. é¡¶æ æŒ‰é’®ç‚¹å‡» â†’ å‘é€äº‹ä»¶
const openChat = (): void => {
  mittBus.emit('openChat')
}

// 2. èŠå¤©çª—å£ç»„ä»¶ â†’ ç›‘å¬äº‹ä»¶
onMounted(() => {
  mittBus.on('openChat', openChat)
})
```

### 3.4 æ¶ˆæ¯æ•°æ®ç»“æ„

```typescript
interface ChatMessage {
  id: number        // æ¶ˆæ¯å”¯ä¸€æ ‡è¯†
  sender: string    // å‘é€è€…åç§° ('Art Bot' | 'Ricky')
  content: string   // æ¶ˆæ¯æ–‡æœ¬å†…å®¹
  time: string      // å‘é€æ—¶é—´ï¼ˆHH:mm æ ¼å¼ï¼‰
  isMe: boolean     // æ˜¯å¦ä¸ºå½“å‰ç”¨æˆ·å‘é€
  avatar: string    // å‘é€è€…å¤´åƒ URL
}
```

### 3.5 é¢„ç½® Mock å¯¹è¯å†…å®¹

èŠå¤©çª—å£å¯åŠ¨æ—¶ä¼šå±•ç¤ºä»¥ä¸‹ 9 æ¡é¢„è®¾å¯¹è¯ï¼š

| # | å‘é€è€… | å†…å®¹ | æ—¶é—´ |
|---|--------|------|------|
| 1 | Art Bot | ä½ å¥½ï¼æˆ‘æ˜¯ä½ çš„AIåŠ©æ‰‹ï¼Œæœ‰ä»€ä¹ˆæˆ‘å¯ä»¥å¸®ä½ çš„å—ï¼Ÿ | 10:00 |
| 2 | Ricky | æˆ‘æƒ³äº†è§£ä¸€ä¸‹ç³»ç»Ÿçš„ä½¿ç”¨æ–¹æ³•ã€‚ | 10:01 |
| 3 | Art Bot | å¥½çš„ï¼Œæˆ‘æ¥ä¸ºæ‚¨ä»‹ç»ç³»ç»Ÿçš„ä¸»è¦åŠŸèƒ½ã€‚é¦–å…ˆï¼Œæ‚¨å¯ä»¥é€šè¿‡å·¦ä¾§èœå•è®¿é—®ä¸åŒçš„åŠŸèƒ½æ¨¡å—... | 10:02 |
| 4 | Ricky | å¬èµ·æ¥å¾ˆä¸é”™ï¼Œèƒ½å…·ä½“è®²è®²æ•°æ®åˆ†æéƒ¨åˆ†å—ï¼Ÿ | 10:05 |
| 5 | Art Bot | å½“ç„¶å¯ä»¥ã€‚æ•°æ®åˆ†ææ¨¡å—å¯ä»¥å¸®åŠ©æ‚¨å®æ—¶ç›‘æ§å…³é”®æŒ‡æ ‡ï¼Œå¹¶ç”Ÿæˆè¯¦ç»†çš„æŠ¥è¡¨... | 10:06 |
| 6 | Ricky | å¤ªå¥½äº†ï¼Œé‚£æˆ‘å¦‚ä½•å¼€å§‹ä½¿ç”¨å‘¢ï¼Ÿ | 10:08 |
| 7 | Art Bot | æ‚¨å¯ä»¥å…ˆåˆ›å»ºä¸€ä¸ªé¡¹ç›®ï¼Œç„¶ååœ¨é¡¹ç›®ä¸­æ·»åŠ ç›¸å…³çš„æ•°æ®æºï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è¿›è¡Œåˆ†æã€‚ | 10:09 |
| 8 | Ricky | æ˜ç™½äº†ï¼Œè°¢è°¢ä½ çš„å¸®åŠ©ï¼ | 10:10 |
| 9 | Art Bot | ä¸å®¢æ°”ï¼Œæœ‰ä»»ä½•é—®é¢˜éšæ—¶è”ç³»æˆ‘ã€‚ | 10:11 |

## 4. é…ç½®è¯´æ˜

### 4.1 å¯ç”¨ / ç¦ç”¨èŠå¤©æŒ‰é’®

ä¿®æ”¹ `art-design-pro/src/config/modules/headerBar.ts`ï¼š

```typescript
export const headerBarConfig: HeaderBarFeatureConfig = {
  // ...å…¶ä»–é…ç½®
  chat: {
    enabled: true,  // è®¾ä¸º false å¯éšè—é¡¶æ èŠå¤©æŒ‰é’®
    description: 'èŠå¤©åŠŸèƒ½ï¼Œæä¾›å®æ—¶æ²Ÿé€š'
  },
  // ...
}
```

### 4.2 ç¦ç”¨å…¨å±€èŠå¤©çª—å£ç»„ä»¶

ä¿®æ”¹ `art-design-pro/src/config/modules/component.ts`ï¼š

```typescript
{
  name: 'èŠå¤©çª—å£',
  key: 'chat-window',
  component: defineAsyncComponent(
    () => import('@/components/core/layouts/art-chat-window/index.vue')
  ),
  enabled: false  // è®¾ä¸º false å¯å®Œå…¨ç¦ç”¨èŠå¤©çª—å£ç»„ä»¶
}
```

## 5. æ¥å…¥å¤§æ¨¡å‹çš„æ”¹é€ æ–¹æ¡ˆï¼ˆå»ºè®®ï¼‰

å¦‚æœè¦å°† Art Bot æ”¹é€ ä¸ºçœŸæ­£çš„ AI åŠ©æ‰‹ï¼Œä»¥ä¸‹æ˜¯æ¨èçš„æŠ€æœ¯æ–¹æ¡ˆï¼š

### 5.1 æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å‰ç«¯ (Vue 3)     â”‚     â”‚  åç«¯ (FastAPI)     â”‚     â”‚  LLM æœåŠ¡         â”‚
â”‚                  â”‚     â”‚                   â”‚     â”‚                  â”‚
â”‚  ArtChatWindow   â”‚â”€â”€â”€â”€â–¶â”‚  POST /api/chat   â”‚â”€â”€â”€â”€â–¶â”‚  OpenAI API      â”‚
â”‚  - å‘é€æ¶ˆæ¯      â”‚     â”‚  - é‰´æƒ (JWT)      â”‚     â”‚  DeepSeek API    â”‚
â”‚  - æ˜¾ç¤ºå›å¤      â”‚â—€â”€â”€â”€â”€â”‚  - è½¬å‘/æµå¼å“åº”   â”‚â—€â”€â”€â”€â”€â”‚  Ollama (æœ¬åœ°)    â”‚
â”‚  - æµå¼æ¸²æŸ“      â”‚ SSE â”‚  - å†å²ç®¡ç†        â”‚     â”‚  æˆ–å…¶ä»– LLM      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 åç«¯æ”¹é€ è¦ç‚¹

1. **æ–°å¢èŠå¤© API ç«¯ç‚¹**ï¼šåœ¨ `vue-fastapi-admin-main/app/api/` ä¸‹æ–°å¢ chat è·¯ç”±
2. **LLM å®¢æˆ·ç«¯é›†æˆ**ï¼šä½¿ç”¨ `httpx` æˆ– `openai` SDK å¯¹æ¥å¤§æ¨¡å‹ API
3. **æµå¼å“åº”ï¼ˆSSEï¼‰**ï¼šä½¿ç”¨ FastAPI çš„ `StreamingResponse` å®ç°æ‰“å­—æœºæ•ˆæœ
4. **å¯¹è¯å†å²å­˜å‚¨**ï¼šåˆ©ç”¨ Tortoise ORM æ–°å¢ ChatHistory æ¨¡å‹
5. **é…ç½®é¡¹**ï¼šåœ¨ `app/settings/config.py` ä¸­æ–°å¢ LLM ç›¸å…³é…ç½®

```python
# å»ºè®®åœ¨ config.py ä¸­æ–°å¢çš„é…ç½®é¡¹
LLM_PROVIDER: str = "openai"           # openai / deepseek / ollama
LLM_API_KEY: str = ""                  # API å¯†é’¥
LLM_API_BASE_URL: str = ""            # API åŸºåœ°å€
LLM_MODEL: str = "gpt-4o"             # æ¨¡å‹åç§°
LLM_MAX_TOKENS: int = 2048            # æœ€å¤§ token æ•°
LLM_TEMPERATURE: float = 0.7          # ç”Ÿæˆæ¸©åº¦
LLM_SYSTEM_PROMPT: str = "ä½ æ˜¯è²ç‰¹æ•°æ®ç”Ÿæˆå¹³å°çš„AIåŠ©æ‰‹..."  # ç³»ç»Ÿæç¤ºè¯
```

### 5.3 å‰ç«¯æ”¹é€ è¦ç‚¹

1. **è°ƒç”¨åç«¯ API**ï¼š`sendMessage()` ä¸­å‘èµ· `POST /api/chat` è¯·æ±‚
2. **æµå¼æ¸²æŸ“**ï¼šä½¿ç”¨ `EventSource` æˆ– `fetch` + `ReadableStream` å¤„ç† SSE
3. **åŠ è½½çŠ¶æ€**ï¼šåœ¨ç­‰å¾…å›å¤æ—¶æ˜¾ç¤º "æ­£åœ¨è¾“å…¥..." åŠ¨ç”»
4. **é”™è¯¯å¤„ç†**ï¼šç½‘ç»œå¼‚å¸¸ã€API é™æµã€Token è¶…é™ç­‰é”™è¯¯æç¤º
5. **ä¼šè¯ç®¡ç†**ï¼šæ”¯æŒæ–°å»ºå¯¹è¯ã€å†å²è®°å½•æŸ¥çœ‹

### 5.4 æ ¸å¿ƒä»£ç æ”¹é€ ç¤ºä¾‹

**å‰ç«¯ `sendMessage()` æ”¹é€ åçš„ä¼ªä»£ç ï¼š**

```typescript
const sendMessage = async (): Promise<void> => {
  const text = messageText.value.trim()
  if (!text || isLoading.value) return

  // 1. æ·»åŠ ç”¨æˆ·æ¶ˆæ¯
  messages.value.push({ sender: USER_NAME, content: text, isMe: true, ... })
  messageText.value = ''

  // 2. æ·»åŠ  Bot å ä½æ¶ˆæ¯ï¼ˆæ˜¾ç¤ºåŠ è½½ä¸­ï¼‰
  const botMsg = reactive({ sender: BOT_NAME, content: '', isMe: false, loading: true, ... })
  messages.value.push(botMsg)

  // 3. è°ƒç”¨åç«¯ APIï¼ˆæµå¼ï¼‰
  try {
    const response = await fetch('/api/chat', {
      method: 'POST',
      headers: { 'Authorization': `Bearer ${token}`, 'Content-Type': 'application/json' },
      body: JSON.stringify({ message: text, history: getRecentHistory() })
    })

    const reader = response.body.getReader()
    const decoder = new TextDecoder()

    while (true) {
      const { done, value } = await reader.read()
      if (done) break
      botMsg.content += decoder.decode(value)
    }

    botMsg.loading = false
  } catch (error) {
    botMsg.content = 'æŠ±æ­‰ï¼ŒæœåŠ¡æš‚æ—¶ä¸å¯ç”¨ï¼Œè¯·ç¨åé‡è¯•ã€‚'
    botMsg.loading = false
  }
}
```

## 6. ç›¸å…³åŠŸèƒ½å¯¹æ¯”

æœ¬å¹³å°ä¸­ä¸"èŠå¤©"ç›¸å…³çš„åŠŸèƒ½æœ‰ä¸‰ä¸ªï¼ŒåŒºåˆ«å¦‚ä¸‹ï¼š

| åŠŸèƒ½ | ä½ç½® | ç”¨é€” | æ˜¯å¦æ¥å…¥ AI |
|------|------|------|------------|
| **Art Bot èŠå¤©çª—å£** | é¡¶æ å³ä¾§å›¾æ ‡ â†’ ä¾§è¾¹æŠ½å±‰ | ç³»ç»Ÿå†…ç½® UI æ¼”ç¤ºç»„ä»¶ | âŒ çº¯ Mock æ•°æ® |
| **èŠå¤©æ¨¡æ¿é¡µé¢** | èœå•ï¼šæ¨¡æ¿ â†’ èŠå¤© | ç‹¬ç«‹èŠå¤©é¡µé¢ UI æ¨¡æ¿ | âŒ çº¯ Mock æ•°æ® |
| **WebSocket ç¤ºä¾‹** | èœå•ï¼šç¤ºä¾‹ â†’ WebSocket èŠå¤© | WebSocket è¿æ¥æŠ€æœ¯æ¼”ç¤º | âŒ é€šç”¨ WebSocket æ¼”ç¤º |

## 7. æ€»ç»“

Art Bot èŠå¤©çª—å£ç›®å‰æ˜¯ä¸€ä¸ª **çº¯å‰ç«¯ UI å±•ç¤ºç»„ä»¶**ï¼Œæ¥æºäº Art Design Pro å¼€æºæ¨¡æ¿æ¡†æ¶ã€‚å®ƒæä¾›äº†å®Œæ•´çš„èŠå¤©ç•Œé¢ UIï¼ˆæ¶ˆæ¯æ°”æ³¡ã€è¾“å…¥æ¡†ã€åœ¨çº¿çŠ¶æ€ç­‰ï¼‰ï¼Œä½† **æ²¡æœ‰æ¥å…¥ä»»ä½•å¤§è¯­è¨€æ¨¡å‹æˆ– AI åç«¯æœåŠ¡**ã€‚

å¦‚éœ€å°†å…¶æ”¹é€ ä¸ºçœŸæ­£çš„ AI å¯¹è¯åŠ©æ‰‹ï¼Œéœ€è¦ï¼š
1. åœ¨åç«¯æ–°å¢ LLM å¯¹æ¥çš„ Chat API
2. å‰ç«¯ä¿®æ”¹ `sendMessage()` æ–¹æ³•ï¼Œè°ƒç”¨åç«¯ API å¹¶å¤„ç†æµå¼å“åº”
3. é…ç½® LLM æœåŠ¡çš„ API Key å’Œç›¸å…³å‚æ•°

---

*æ–‡æ¡£ç‰ˆæœ¬ï¼šv1.0*
*æ›´æ–°æ—¥æœŸï¼š2026-02-26*
*é€‚ç”¨ç‰ˆæœ¬ï¼šè²ç‰¹æ•°æ®ç”Ÿæˆå¹³å° å½“å‰å¼€å‘ç‰ˆ*
